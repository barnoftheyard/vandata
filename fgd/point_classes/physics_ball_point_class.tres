[gd_resource type="Resource" load_steps=4 format=2]

[ext_resource path="res://scenes/Entities/PhysicsBall.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/qodot/src/resources/game-definitions/fgd/qodot_fgd_point_class.gd" type="Script" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends RigidBody
tool

signal bounce

export(Dictionary) var properties setget set_properties

func set_properties(new_properties : Dictionary) -> void:
	if(properties != new_properties):
		properties = new_properties
		update_properties()
		
func bullet_hit(damage, _id, bullet_hit_pos, force_multiplier):			#handles how bullets push the prop
	var direction_vect = global_transform.origin - bullet_hit_pos
	direction_vect = direction_vect.normalized()
	apply_impulse(bullet_hit_pos, direction_vect * (mass / (damage * force_multiplier)))

func update_properties():
	if 'velocity' in properties:
		linear_velocity = properties['velocity']
		
func _ready():
	connect(\"bounce\", self, \"_on_bounce\")

func use():
	emit_signal(\"bounce\")

func _on_bounce():
	linear_velocity.y = 10
"

[resource]
script = ExtResource( 2 )
class_options = "----------------------------------------------------------------"
classname = "physics_ball"
description = "Physics Ball"
qodot_internal = false
base_classes = [  ]
class_properties = {
"name": "",
"velocity": Vector3( 0, 0, 0 )
}
class_property_descriptions = {
"name": "The name of the object. Used by signals.",
"velocity": "Initial velocity"
}
meta_properties = {
"size": AABB( -8, -8, -8, 8, 8, 8 )
}
node_options = "----------------------------------------------------------------"
node_class = ""
transient_node = false
scene = "----------------------------------------------------------------"
scene_file = ExtResource( 1 )
scripting = "----------------------------------------------------------------"
script_class = SubResource( 1 )
